!function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(o,n,function(e){return t[e]}.bind(null,n));return o},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=11)}([function(t,e){!function(){t.exports=this.wp.element}()},function(t,e){!function(){t.exports=this.wp.components}()},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(t){return typeof t}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(e)}t.exports=r},function(t,e){!function(){t.exports=this.wp.i18n}()},function(t,e){!function(){t.exports=this.wp.blocks}()},function(t,e){!function(){t.exports=this.wp.blockEditor}()},,,,function(t,e,r){},function(t,e,r){},function(t,e,r){"use strict";r.r(e);var o=r(0),n=r(3),c=r(1),i=r(4),s=r(2),a=r.n(s),l=r(5),u=(r(9),function(){return Object(o.createElement)("div",{className:"wp-block-embed is-loading"},Object(o.createElement)(c.Spinner,null),Object(o.createElement)("p",null,Object(n.__)("Embeddingâ€¦")))});Object(o.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(o.createElement)(c.G,null,Object(o.createElement)(c.Path,{d:"M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"})));var p=function(t,e){var r={};r.post_id=jQuery("#post_ID").val(),r.wptt_tweet_url=t,r.action="wptt_add_thread_to_post",wp.data.dispatch("core/editor").lockPostAutosaving("wptt-lock"),wp.data.dispatch("core/editor").lockPostSaving("wptt-lock");var o=function(t){var e=0;return wp.data.select("core/block-editor").getBlocks().forEach((function(r,o){r.clientId==t&&(e=o)})),e}(e.clientId)+1;jQuery.ajax({type:"POST",url:ajaxurl,data:r,dataType:"json",success:function(t){var r,n;if(t&&t.message){if(0==parseInt(t.error)){if(t.statuses_text&&t.statuses_text.length>0)for(r=0;r<t.statuses_text.length;r++){switch(a()(t.statuses_text[r])){case"object":t.statuses_text[r].type&&"gallery"==t.statuses_text[r].type&&(t.statuses_text[r].content.length>1?n=wp.blocks.createBlock("core/gallery",{images:t.statuses_text[r].content,linkTo:t.statuses_text[r].linkTo}):1==t.statuses_text[r].content.length&&(n=wp.blocks.createBlock("core/image",{url:t.statuses_text[r].content[0].url,href:t.statuses_text[r].content[0].url}))),t.statuses_text[r].type&&"video"==t.statuses_text[r].type&&(n=wp.blocks.createBlock("core/video",t.statuses_text[r].content));break;case"string":default:n=wp.blocks.createBlock("core/paragraph",{content:t.statuses_text[r]})}wp.data.dispatch("core/block-editor").insertBlock(n,o),o+=1}wp.data.dispatch("core/editor").savePost(),wp.data.dispatch("core/block-editor").removeBlock(e.clientId)}}else{var c='<div class="notice notice-error"><p> '.concat(wp_twitter_threads.error_undefined,"</p></div>");jQuery("#wptt-result").html(c),wp.data.dispatch("core/notices").createNotice("warning",wp_twitter_threads.error_undefined,{isDismissible:!0})}wp.data.dispatch("core/block-editor").updateBlockAttributes(e.clientId,{isRetrieving:!1});var i=1==t.error?"warning":"success";wp.data.dispatch("core/notices").createNotice(i,t.message_text,{isDismissible:!0})},complete:function(){wp.data.dispatch("core/editor").unlockPostAutosaving("wptt-lock"),wp.data.dispatch("core/editor").unlockPostSaving("wptt-lock")}})};r(10);var d={foreground:"#006ba1",src:Object(o.createElement)(c.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(o.createElement)(c.G,null,Object(o.createElement)(c.Path,{d:"M22.23 5.924c-.736.326-1.527.547-2.357.646.847-.508 1.498-1.312 1.804-2.27-.793.47-1.67.812-2.606.996C18.325 4.498 17.258 4 16.078 4c-2.266 0-4.103 1.837-4.103 4.103 0 .322.036.635.106.935-3.41-.17-6.433-1.804-8.457-4.287-.353.607-.556 1.312-.556 2.064 0 1.424.724 2.68 1.825 3.415-.673-.022-1.305-.207-1.86-.514v.052c0 1.988 1.415 3.647 3.293 4.023-.344.095-.707.145-1.08.145-.265 0-.522-.026-.773-.074.522 1.63 2.038 2.817 3.833 2.85-1.404 1.1-3.174 1.757-5.096 1.757-.332 0-.66-.02-.98-.057 1.816 1.164 3.973 1.843 6.29 1.843 7.547 0 11.675-6.252 11.675-11.675 0-.178-.004-.355-.012-.53.802-.578 1.497-1.3 2.047-2.124z"})))};Object(i.registerBlockType)("lnj/wptt-block",{apiVersion:2,title:"WPTT",description:Object(n.__)("Turn Twitter Thread into Post.","wp-twitter-threads"),category:"embed",icon:d,attributes:{retrieveResult:{type:"string",default:""},isRetrieving:{type:"boolean",default:!1},tweet:{type:"string",source:"html",selector:"div"}},edit:function(t){var e=t.attributes,r=t.setAttributes,i=Object(l.useBlockProps)();return e.firstLoaded||(r({firstLoaded:1}),r({isRetrieving:!1})),Object(o.createElement)("div",i,e.isRetrieving&&Object(o.createElement)(u,null),!e.isRetrieving&&Object(o.createElement)(o.Fragment,null,Object(o.createElement)(c.TextControl,{value:e.tweet,onChange:function(t){r({tweet:t})},placeholder:Object(n.__)("URL","wp-twitter-threads")}),Object(o.createElement)(c.Button,{isPrimary:!0,onClick:function(){r({isRetrieving:!0}),p(e.tweet,t)}},Object(n.__)("Retrieve the thread","wp-twitter-threads"))))},save:function(){return null}})}]);